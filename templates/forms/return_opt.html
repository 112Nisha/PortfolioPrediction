<form method="POST" action="{{ url_for('return_opt') }}" class="p-3">
    <div class="mb-3">
        <label>Annual Return Percentage</label>
        <input type="number" name="return_value" step="any" min="0" class="form-control" placeholder="Enter target return" {% if
            returnval %} value="{{ returnval }}" {% endif %} required>
    </div>

    <div id="stocks-return-container">

        {% if stocks %} {% for i in range(stocks|length) %}
        <div class="stock-input-group mb-2">
            <label for="stock{{ i }}" class="form-label visually-hidden">Stock {{ i+1 }}:</label>
            <select name="stock" id="stock1" class="form-control">
                <option value="Stock Symbol (e.g., HDFCBANK)">
                    Select a Stock Symbol
                </option>
                {% for s in stock_options %}
                <option value="{{ s }}" {% if s==stocks[i] %} selected {% endif %}>{{ s }}</option>
                {% endfor %}
            </select>
        </div>
        {% endfor %} 
        {% else %}
        <div class="stock-input-group mb-2">
            <select name="stock" class="form-control">
                <option value="">Select a Stock</option>
                {% for s in stock_options %}
                <option value="{{ s }}">{{ s }}</option>
                {% endfor %}
            </select>
            <button type="button" class="btn btn-danger remove-stock-btn">Remove</button>
        </div>
        <div class="stock-input-group mb-2">
            <select name="stock" class="form-control">
                <option value="">Select a Stock</option>
                {% for s in stock_options %}
                <option value="{{ s }}">{{ s }}</option>
                {% endfor %}
            </select>
            <button type="button" class="btn btn-danger remove-stock-btn">Remove</button>
        </div>
        {% endif %}

    </div>

    <div class="d-flex justify-content-start align-items-center gap-3 mt-3">
        <button type="button" id="add-return-stock-btn" class="btn btn-secondary">
            Add Stock
        </button>

        <button type="submit" class="btn btn-primary">
            Calculate Portfolio
        </button>
    </div>


    {% include "forms/train_test_inputs.html" %}
</form>