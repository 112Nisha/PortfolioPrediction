{% extends 'base.html' %}
{% block title %}Home - PortfolioPrediction{% endblock %}
{% block content %}
<h1>Portfolio Mean-Variance Frontier</h1>
<form method="POST">
    <div id="stocks">
        <div>
            <label for="stock1">Stock 1:</label>
            <select name="stock" id="stock1">
                <option value="CIPLA" {% if stocks and stocks[0]=='CIPLA' %}selected{% endif %}>CIPLA</option>
                <option value="HDFCBANK" {% if stocks and stocks[0]=='HDFCBANK' %}selected{% endif %}>HDFCBANK</option>
                <option value="INFY" {% if stocks and stocks[0]=='INFY' %}selected{% endif %}>INFY</option>
                <option value="LNT" {% if stocks and stocks[0]=='LNT' %}selected{% endif %}>LNT</option>
                <option value="NSEI" {% if stocks and stocks[0]=='NSEI' %}selected{% endif %}>NSEI</option>
                <option value="SBIN" {% if stocks and stocks[0]=='SBIN' %}selected{% endif %}>SBIN</option>
                <option value="TCS" {% if stocks and stocks[0]=='TCS' %}selected{% endif %}>TCS</option>
            </select>
            <input type="number" name="weight" placeholder="Amount (₹)" step="0.01" min="0" value="{% if weights and weights[0] %}{{ weights[0] }}{% endif %}">
        </div>
        <div>
            <label for="stock2">Stock 2:</label>
            <select name="stock" id="stock2">
                <option value="CIPLA" {% if stocks and stocks[1]=='CIPLA' %}selected{% endif %}>CIPLA</option>
                <option value="HDFCBANK" {% if stocks and stocks[1]=='HDFCBANK' %}selected{% endif %}>HDFCBANK</option>
                <option value="INFY" {% if stocks and stocks[1]=='INFY' %}selected{% endif %}>INFY</option>
                <option value="LNT" {% if stocks and stocks[1]=='LNT' %}selected{% endif %}>LNT</option>
                <option value="NSEI" {% if stocks and stocks[1]=='NSEI' %}selected{% endif %}>NSEI</option>
                <option value="SBIN" {% if stocks and stocks[1]=='SBIN' %}selected{% endif %}>SBIN</option>
                <option value="TCS" {% if stocks and stocks[1]=='TCS' %}selected{% endif %}>TCS</option>
            </select>
            <input type="number" name="weight" placeholder="Amount (₹)" step="0.01" min="0" value="{% if weights and weights[1] %}{{ weights[1] }}{% endif %}">
        </div>
    </div>
    <button type="submit">Submit</button>
</form>
{% if stats %}
    <h2>Portfolio Stats</h2>
    <ul>
        <li>Expected Return (₹): {{ stats.mean }}</li>
        <li>Risk (variance) : {{ stats.variance }}</li>
    </ul>
    <h2>Mean-Variance Frontier</h2>
    {% if graph_html %}
        {{ graph_html|safe }}
    {% else %}
        <p>No graph generated yet.</p>
    {% endif %}
{% endif %}
<script>
    function addStock() {
        var div = document.createElement('div');
        div.innerHTML = '<input type="text" name="stock" placeholder="Stock Symbol"> <input type="number" name="weight" placeholder="Weight" step="0.01" min="0" max="1">';
        document.getElementById('stocks').appendChild(div);
    }
</script>
{% endblock %}
